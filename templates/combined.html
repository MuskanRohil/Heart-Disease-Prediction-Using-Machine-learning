<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heart Disease Prediction</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(to right, #021a47, #08101f);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        height: auto;
        min-height: 100vh;
        margin: 0;
        padding: 0px 20px 0px 20px;
        color: white;
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
        padding-top: 20px;
      }
      .container {
        background: rgba(206, 209, 211, 0.918);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(12px);
        text-align: center;
        max-width: 650px;
        width: 90%;
        margin: 30px auto;
        transition: 0.3s;
        color: black;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      .container h2 {
        color: rgb(72, 10, 126);
        font-size: 30px;
        margin-bottom: 10px;
      }

      .container p {
        color: rgb(72, 10, 126);
        font-size: 20px;
        margin-bottom: 30px;
      }

      form label {
        display: block;
        text-align: left;
        margin: 12px 0 5px;
        font-weight: 600;
        font-size: 16px;
        color: #333;
      }

      /* Style inputs and selects the same */
      input,
      select {
        display: block;
        width: 100%;
        padding: 12px;
        margin-bottom: 15px;
        border: 1px solid #ccc;
        border-radius: 10px;
        outline: none;
        font-size: 16px;
        transition: 0.2s ease-in-out;
        box-sizing: border-box;
        background-color: #fff;
      }

      input:focus,
      select:focus {
        border-color: #7f5cb3;
        box-shadow: 0 0 6px rgba(127, 92, 179, 0.5);
      }

      button {
        background: linear-gradient(to right, #974697, #7f5cb3);
        color: white;
        cursor: pointer;
        font-weight: bold;
        text-transform: uppercase;
        transition: all 0.3s ease-in-out;
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        margin-top: 10px;
      }

      button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(205, 106, 183, 0.6);
      }

      header {
        /* background: rgba(255, 255, 255, 0.15); */
        background: whitesmoke;
        padding: 20px;
        margin-bottom: 20px;
        color: black;
        font-size: 24px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-left: 20px;
        padding-right: 20px;
        width: 100%;
      }
      header span {
        font-size: 30px;
        color: #021a47;
      }
      .header-buttons {
        display: flex;
        gap: 10px; /* space between buttons */
      }
      .logo {
        height: 100px;
        width: 100px;
        margin-left: 10px;
        border-radius: 10px;
      }
      .account {
        font-size: 16px;
        color: white;
        text-decoration: none;
        background: linear-gradient(to right, #974697, #7f5cb3);
        padding: 8px 15px;
        border-radius: 5px;
        transition: 0.3s;
        margin-right: 10px;
      }
      .account:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(205, 106, 183, 0.6);
      }

      footer {
        background: whitesmoke;
        padding: 10px 0px 10px 0px;
        margin-top: 100px;
        width: 100vw;
        height: auto;
        text-align: center;
        color: #000000;
        bottom: 0;
      }

      footer p {
        color: black;
        font-size: 14px;
        text-align: center;
      }
      .footerContainer {
        width: 100vw;
        padding: 70px 30px 20px;
      }
      .socialIcons {
        display: flex;
        justify-content: center;
      }
      .socialIcons a {
        text-decoration: none;
        padding: 10px;
        background-color: #fff;
        margin: 10px;
        border-radius: 50%;
      }
      .socialIcons a i {
        font-size: 2em;
        color: black;
        opacity: 0.9;
      }
      .socialIcons a:hover {
        background-color: #111;
        transition: 0.5s;
      }
      .socialIcons a:hover i {
        color: #fff;
        transition: 0.5s;
      }

      .about-section {
        background: rgba(206, 209, 211, 0.918);
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        max-width: 900px;
        margin: 30px auto;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
      .about-section h2 {
        color: rgb(72, 10, 126);
        font-size: 30px;
        margin-bottom: 15px;
      }
      .about-section p {
        font-size: 15px;
        color: #000000;
        line-height: 1.6;
        text-align: left;
        margin-top: 20px;
      }
      .yoga {
        height: 230px;
        width: 230px;
        float: right;
        clear: right;
        margin: 20px 10px 20px 30px;
        box-sizing: border-box;
        border-radius: 50%;
        box-shadow: 10px 10px 20px #021a47;
      }
      .salad {
        height: 230px;
        width: 230px;
        float: right;
        clear: right;
        margin: 20px 10px 20px 30px;
        box-sizing: border-box;
        border-radius: 50%;
        box-shadow: 10px 10px 20px #021a47;
      }
      .smoking {
        height: 230px;
        width: 230px;
        float: left;
        clear: left;
        margin: 20px 50px 20px 30px;
        box-sizing: border-box;
        border-radius: 50%;
        box-shadow: 10px 10px 20px #021a47;
      }
      .about-section ul {
        text-align: left;
        color: #000000;
      }
      .about-section ul li {
        margin: 5px;
        font-size: 15px;
      }

      .popup {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .popup-content {
        background: white;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
      }

      .popup-content h2 {
        color: #021a47;
      }

      .popup-content button {
        margin: 10px;
        padding: 10px 20px;
        border: none;
        background: linear-gradient(to right, #974697, #7f5cb3);
        color: white;
        cursor: pointer;
        border-radius: 5px;
        font-size: 16px;
      }

      .popup-content button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(205, 106, 183, 0.6);
      }
    </style>
  </head>
  <body>
    <header>
      <img src="/static/images/heartLogo.png" alt="Logo" class="logo" />
      <span>Heart Disease Prediction System</span>
      <div class="header-buttons">
        <a href="/" class="account" target="_self">Home</a>
        <a href="/account" class="account" target="_blank">My Account</a>
      </div>
    </header>

    <div class="about-section">
      <h2>Description</h2>
      <img src="/static/images/yoga.jpg" alt="yoga" class="yoga" />
      <img src="/static/images/salad.jpg" alt="salad" class="salad" />
      <p>The input fields of following form are:</p>
      <ul>
        <li>Age - Age of the patient</li>
        <li>Sex - Gender of the patient (1: Male, 0: Female)</li>
        <li>Cholesterol - Cholesterol levels of the patient</li>
        <li>Heart Rate - Heart rate of the patient</li>
        <li>Diabetes - Whether the patient has diabetes (1: Yes, 0: No)</li>
        <li>Family History - Family history of heart-related problems (1: Yes, 0:No)</li>
        <li>Smoking - Smoking status of the patient (1: Smoker, 0: Non-smoker)</li>
        <li>Obesity - Obesity status of the patient (1: Obese, 0: Not obese)</li>
        <li>Alcohol Consumption - Level of alcohol consumption by the patient (1:Alcoholic, 0: Non-Alcoholic)</li>
        <li>Exercise Hours Per Week - Number of exercise hours per week</li>
      <li>Diet - Dietary habits of the patient (2.0: healthy, 1.0: average, 0.0:unhealthy) </li>
        <li>Previous Heart Problems - Previous heart problems of the patient (1:Yes, 0: No)</li>
        <li>Medication Use - Medication usage by the patient (1: Yes, 0: No)</li>
        <li>Stress Level - Stress level reported by the patient (1-10)</li>
        <li>Sedentary Hours Per Day - Hours of sedentary activity per day</li>
        <li>Income - Income level of the patient</li>
        <li>BMI - Body Mass Index (BMI) of the patient</li>
        <li>Physical Activity Days Per Week - Days of physical activity per week</li>
        <li>Sleep Hours Per Day - Hours of sleep per day</li>
      </ul>
      <img src="/static/images/smoking.jpg" alt="smoking" class="smoking" />
      <br /><br /><br /><br />
      <p id="desc">
        Check your heart health by entering these simple details about your
        lifestyle and medical history. Our system analyzes your heart rate based
        on factors like diet, exercise, and cholesterol levels to give you an
        accurate risk assessment.
      </p>
    </div>

    <div id="main-content">
      <div class="header">
        <h3>Assess your heart health risk easily by providing basic lifestyle details and clinical variables.</h3>
      </div>

      <div class="container">
        <h2>Enter Your Details</h2>
        <p>Fill in the details below to predict your heart disease risk.</p>

        <form action="/predict_combined" method="POST" id="prediction-form">
          <label>Age (in years):</label>
          <input type="number" name="age" placeholder="e.g., 30" min="1" required/>

          <label>Gender:</label>
          <select name="gender" required>
            <option value="">--Select Gender--</option>
            <option value="1">Male</option>
            <option value="0">Female</option>
          </select>

          <label>Cholesterol (mg/dL):</label>
          <input type="number" name="cholesterol" placeholder="e.g., 180" min="100" max="400" required/>

          <label>Resting Heart Rate (bpm):</label>
          <input type="number" name="heart_rate" placeholder="e.g., 70" min="40" max="180" required/>

          <label>Diabetes:</label>
          <select name="diabetes" required>
            <option value="">--Select--</option>
            <option value="1">Diabetic</option>
            <option value="0">Non-Diabetic</option>
          </select>

          <label>Family History of Heart Disease:</label>
          <select name="family_history" required>
            <option value="">--Select--</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>

          <label>Smoking Status:</label>
          <select name="smoking" required>
            <option value="">--Select--</option>
            <option value="1">Smoker</option>
            <option value="0">Non-Smoker</option>
          </select>

          <label>Obesity:</label>
          <select name="obesity" required>
            <option value="">--Select--</option>
            <option value="1">Obese</option>
            <option value="0">Not Obese</option>
          </select>

          <label>Alcohol Consumption:</label>
          <select name="alcohol" required>
            <option value="">--Select--</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>

          <label>Exercise Hours Per Week:</label>
          <input type="number" name="exercise" placeholder="e.g., 4" min="0" max="20" required/>

          <label>Diet Type:</label>
          <select name="diet_type" required>
            <option value="">--Select--</option>
            <option value="0.0">Unhealthy</option>
            <option value="1.0">Moderate</option>
            <option value="2.0">Healthy</option>
          </select>

          <label>Previous Heart Problems:</label>
          <select name="heart_problems" required>
            <option value="">--Select--</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>

          <label>Medication Use:</label>
          <select name="medication" required>
            <option value="">--Select--</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
          </select>

          <label>Stress Level (0 - 10):</label>
          <input type="number" name="stress_level" placeholder="e.g., 5" min="0" max="10" required/>

          <label>Sedentary Hours Per Day:</label>
          <input  type="number" name="sedentary_hours" placeholder="e.g., 6" min="0" max="24" required />

          <label>Annual Income (in â‚¹):</label>
          <input type="number" name="income" placeholder="e.g., 500000" min="0" required/>

          <label>BMI (Body Mass Index):</label>
          <input type="number"  name="bmi" placeholder="e.g., 22.5" step="0.1" min="10" max="50" required/>

          <label>Physical Activity Days Per Week:</label>
          <input type="number" name="activity_days" placeholder="e.g., 3" min="0" max="7" required/>

          <label>Sleep Hours Per Day:</label>
          <input type="number" name="sleep_hours" placeholder="e.g., 7" min="0" max="24" required/>

          <br /><br />
          <button type="submit">Predict</button>
        </form>

        <div id="popup" class="popup">
          <div class="popup-content">
            <h2>Important Notice</h2>
            <p>
              This form requires around 20 inputs and may take some time to
              complete. Do you still want to continue?
            </p>
            <button onclick="closePopup(true)">Yes, Continue</button>
            <button onclick="closePopup(false)">No, Exit</button>
          </div>
        </div>

        <p id="result"></p>
      </div>
    </div>

    <footer>
      <div class="footerContainer">
        <div class="socialIcons">
          <a href="https://www.facebook.com"
            ><i class="fa-brands fa-facebook"></i
          ></a>
          <a href="https://www.instagram.com"
            ><i class="fa-brands fa-instagram"></i
          ></a>
          <a href="https://twitter.com"><i class="fa-brands fa-twitter"></i></a>
          <a href="https://www.google.com"
            ><i class="fa-brands fa-google-plus"></i
          ></a>
          <a href="https://www.youtube.com"
            ><i class="fa-brands fa-youtube"></i
          ></a>
        </div>
      </div>
      <p><strong> 2025 Heart Disease Prediction System </strong></p>
    </footer>

    <script>
      document.getElementById("prediction-form").addEventListener("submit", function (event) {
  event.preventDefault();
  document.getElementById("result").innerText = "Processing...";

  const formData = new FormData(this);

  fetch("/predict_combined", {
    method: "POST",
    body: formData,
  })
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }
      return response.json();
    })
    .then((data) => {
      let resultMessage = "";
      let resultClass = "";

      if (data.risk === "High Risk") {
        resultMessage = "Heart Risk Prediction: <span class='severe-issue'>High Risk</span>";
        resultClass = "severe-issue";
      } else if (data.risk === "Low Risk") {
        resultMessage = "Heart Risk Prediction: <span class='no-issue'>Low Risk</span>";
        resultClass = "no-issue";
      } else {
        resultMessage = "Prediction: " + data.risk;
      }

      const resultElement = document.getElementById("result");
      resultElement.innerHTML = resultMessage;
      resultElement.className = ""; // Clear previous classes
      resultElement.classList.add(resultClass);
      resultElement.style.backgroundColor = "rgba(255, 255, 255, 0.3)";
      resultElement.style.padding = "20px";
    })
    .catch((error) => {
      document.getElementById("result").innerText =
        "Error: Could not process your request. Please try again.";
      console.error("Error:", error);
    });
});


      window.onload = function () {
        document.getElementById("popup").style.display = "flex";
      };

      function closePopup(continueForm) {
        if (continueForm) {
          document.getElementById("popup").style.display = "none";
        } else {
          window.location.href = "/"; // Change to the homepage or another page
        }
      }
    </script>
  </body>
</html>
