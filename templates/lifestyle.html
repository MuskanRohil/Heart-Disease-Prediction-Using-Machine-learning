<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Heart Disease Prediction</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(to right, #021a47, #08101f);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        height: auto;
        min-height: 100vh;
        margin: 0;
        padding: 0px 20px 0px 20px;
        color: white;
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
        padding-top: 20px;
      }
      .container {
        /* background: rgba(255, 255, 255, 0.15); */
        background: rgba(206, 209, 211, 0.918);
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(12px);
        text-align: left;
        max-width: 600px;
        width: 90%;
        margin: 20px auto;
        transition: 0.3s;
        color: black;
      }
      .container h2 {
        color: rgb(72, 10, 126);
        font-size: 30px;
      }
      .container p {
        color: rgb(72, 10, 126);
        font-size: 20px;
      }
      input,
      button {
        display: block;
        width: calc(100% - 20px);
        margin: 10px auto;
        padding: 14px;
        border: none;
        border-radius: 10px;
        outline: none;
        font-size: 16px;
      }
      button {
        background: linear-gradient(to right, #974697, #7f5cb3);
        color: white;
        cursor: pointer;
        font-weight: bold;
        text-transform: uppercase;
      }
      button:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(205, 106, 183, 0.6);
      }

      header {
        /* background: rgba(255, 255, 255, 0.15); */
        background: whitesmoke;
        padding: 20px;
        margin-bottom: 20px;
        color: black;
        font-size: 24px;
        font-weight: bold;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-left: 20px;
        padding-right: 20px;
        width: 100%;
      }
      header span {
        font-size: 30px;
        color: #021a47;
      }
      .header-buttons {
        display: flex;
        gap: 10px; /* space between buttons */
      }
      .logo {
        height: 100px;
        width: 100px;
        margin-left: 10px;
        border-radius: 10px;
      }
      .account {
        font-size: 16px;
        color: white;
        text-decoration: none;
        background: linear-gradient(to right, #974697, #7f5cb3);
        padding: 8px 15px;
        border-radius: 5px;
        transition: 0.3s;
        margin-right: 10px;
      }
      .account:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(205, 106, 183, 0.6);
      }

      footer {
        background: whitesmoke;
        padding: 10px 0px 10px 0px;
        margin-top: 100px;
        width: 100vw;
        height: auto;
        text-align: center;
        color: #000000;
        bottom: 0;
      }

      footer p {
        color: black;
        font-size: 14px;
        text-align: center;
      }
      .footerContainer {
        width: 100vw;
        padding: 70px 30px 20px;
      }
      .socialIcons {
        display: flex;
        justify-content: center;
      }
      .socialIcons a {
        text-decoration: none;
        padding: 10px;
        background-color: #fff;
        margin: 10px;
        border-radius: 50%;
      }
      .socialIcons a i {
        font-size: 2em;
        color: black;
        opacity: 0.9;
      }
      .socialIcons a:hover {
        background-color: #111;
        transition: 0.5s;
      }
      .socialIcons a:hover i {
        color: #fff;
        transition: 0.5s;
      }

      .about-section {
        background: rgba(206, 209, 211, 0.918);
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        max-width: 900px;
        margin: 30px auto;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
      .about-section h2 {
        color: rgb(72, 10, 126);
        font-size: 30px;
        margin-bottom: 15px;
      }
      .about-section p {
        font-size: 15px;
        color: #000000;
        line-height: 1.6;
        text-align: left;
        margin-top: 20px;
      }
      .sleepDisorder {
        height: 350px;
        width: 350px;
        float: right;
        clear: right;
        margin: 20px 10px 20px 30px;
        box-sizing: border-box;
        box-shadow: 10px 10px 20px #021a47;
      }

      /* Style for the prediction result */
      #result {
        margin-top: 20px;
        padding: 15px;
        border-radius: 10px;
        font-weight: bold;
        text-align: center;
        font-size: 18px;
        background: rgba(255, 255, 255, 0.2);
        transition: all 0.5s ease;
      }

      .no-issue {
        color: #006400 !important; /* Dark green */
        background-color: rgba(0, 100, 0, 0.1) !important;
      }

      .mild-issue {
        color: #ff8c00 !important; /* Dark orange */
        background-color: rgba(255, 140, 0, 0.1) !important;
      }

      .severe-issue {
        color: #8b0000 !important; /* Dark red */
        background-color: rgba(139, 0, 0, 0.1) !important;
      }
    </style>
  </head>
  <body>
    <header>
      <img src="/static/images/heartLogo.png" alt="Logo" class="logo" />
      <span>Heart Disease Prediction System</span>
      <div class="header-buttons">
        <a href="/" class="account" target="_self">Home</a>
        <a href="/account" class="account" target="_blank">My Account</a>
      </div>
    </header>

    <div class="about-section">
      <h2>Description</h2>
      <img
        src="/static/images/sleepDisorder.jpg" alt="sleepDisorder" class="sleepDisorder"/>
      <p>The below form will predict the sleep disorder.</p>
      <p>Heart disease and sleep disorders are closely connected, as poor sleep quality and irregular sleep patterns can lead to
        <strong>high blood pressure, irregular heart rate, obesity, and increasedstress levels</strong>â€” all of which are major risk factors for heart disease.
      </p>
      <p>Scientific research shows that sleep disorders like<b>sleep apnea</b> and 
        <b>insomnia</b> are directly linked to
        <b>hypertension</b> and <b>irregular heartbeats</b>. <br />In fact,
        chronic sleep deprivation can increase the risk of a heart attack by up
        to 50%. <br />Additionally, conditions such as
        <strong>obesity, high cholesterol, and diabetes</strong>, which
        contribute to heart disease, are also associated with sleep disorders.</p>
      <p>
        Our hypothesis suggests that if a person has a sleep disorder, their
        risk of developing heart disease increases. By predicting sleep
        disorders early, we may be able to detect or even prevent heart disease.
      </p>
      <p>
        To analyze this, we categorize sleep disorders into three levels. These
        three output levels for sleep disorder are: <br />
        i.<b> 0 (No Sleep Issues),</b><br />ii. <b>1 (Mild Sleep Disorder),</b
        ><br />iii. <b>and 2 (Severe Sleep Disorder).</b>
      </p>
      <p>
        Our system aims to study sleep patterns and assess their role in heart
        disease prediction, helping individuals take proactive steps toward a
        healthier heart.
      </p>
    </div>

    <div id="main-content">
      <div class="header">
        <h3> Assess your heart health risk easily by providing basic lifestyle details.</h3>
      </div>

      <div class="container">
        <h2>Enter Your Details</h2>
        <p>Fill in the details below to predict your heart disease risk.</p>

        <form id="prediction-form" action="/predict_lifestyle" method="POST">
          <label>Age:</label>
          <input type="number" name="age" placeholder="Enter Age" min="1" max="80" required/>

          <label>Gender:</label>
          <input list="genderList" name="gender" placeholder="Select Gender" required/>
          <datalist id="genderList">
            <option value="0" label="0 - Male"></option>
            <option value="1" label="1 - Female"></option>
          </datalist>

          <label>Occupation:</label>
          <input list="occupationList" name="occupation" placeholder="Select Occupation" required/>
          <datalist id="occupationList">
            <option value="0" label="0 - Nurse"></option>
            <option value="1" label="1 - Doctor"></option>
            <option value="2" label="2 - Engineer"></option>
            <option value="3" label="3 - Lawyer"></option>
            <option value="4" label="4 - Teacher"></option>
          </datalist>

          <label>Sleep Duration (in hours):</label>
          <input type="number" name="sleep_duration" placeholder="e.g., 6"min="0" max="24" step="0.1" required/>

          <label>Quality of Sleep:</label>
          <input list="sleepQualityList" name="quality_of_sleep" placeholder="Rate 1 to 10" required/>
          <datalist id="sleepQualityList">
            <option value="1">1 - Very Poor</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10 - Excellent</option>
          </datalist>

          <label>Stress Level: </label>
          <input list="stressLevelList" name="stress_level" placeholder="Rate 1 to 10" required/>
          <datalist id="stressLevelList">
            <option value="1">1 - Very Low</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10 - Very High</option>
          </datalist>

          <label>Physical Activity Level (mins/day):</label>
          <input type="number" name="physical_activity"placeholder="e.g., 30"min="0"max="300" required/>

          <label>BMI Category: </label>
          <input list="bmiList" name="bmi_category" placeholder="Select BMI Category" required/>
          <datalist id="bmiList">
            <option value="0" label="0 - Underweight (<18.5)"></option>
            <option value="1" label="1 - Normal (18.5 - 24.9)"></option>
            <option value="2" label="2 - Overweight (25 - 29.9)"></option>
            <option value="3" label="3 - Obese (30+)"></option>
          </datalist>

          <label>Heart Rate (bpm):</label>
          <input type="number"name="heart_rate" placeholder="e.g., 70" min="30" max="200" required/>

          <label>Daily Steps:</label>
          <input type="number" name="daily_steps" placeholder="e.g., 5000" min="0" max="30000" required/>

          <label>Blood Pressure - Systolic:</label>
          <input type="number" name="systolic" placeholder="e.g., 120" min="80" max="200" required/>

          <label>Blood Pressure - Diastolic:</label>
          <input type="number" name="diastolic" placeholder="e.g., 80" min="50" max="130" required/>

          <button type="submit">Submit</button>
        </form>

        <div id="result"></div>
      </div>
    </div>

    <footer>
      <div class="footerContainer">
        <div class="socialIcons">
          <a href="https://www.facebook.com"
            ><i class="fa-brands fa-facebook"></i
          ></a>
          <a href="https://www.instagram.com"
            ><i class="fa-brands fa-instagram"></i
          ></a>
          <a href="https://twitter.com"><i class="fa-brands fa-twitter"></i></a>
          <a href="https://www.google.com"
            ><i class="fa-brands fa-google-plus"></i
          ></a>
          <a href="https://www.youtube.com"
            ><i class="fa-brands fa-youtube"></i
          ></a>
        </div>
      </div>
      <p><strong> 2025 Heart Disease Prediction System | All RightsReserved</strong></p>
    </footer>

    <script>
      document
        .getElementById("prediction-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          document.getElementById("result").innerText = "Processing...";
          const formData = new FormData(this);
          fetch("/predict_lifestyle", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              return response.json();
            })
            .then((data) => {
              // Display the prediction result
              let resultMessage = "";
              let resultClass = "";

              if (data.sleep_disorder === 0) {
                resultMessage = "Prediction: No Sleep Issues detected";
                resultClass = "no-issue";
              } else if (data.sleep_disorder === 1) {
                resultMessage = "Prediction: Mild Sleep Disorder detected";
                resultClass = "mild-issue";
              } else if (data.sleep_disorder === 2) {
                resultMessage = "Prediction: Severe Sleep Disorder detected";
                resultClass = "severe-issue";
              } else {
                resultMessage = "Prediction: " + data.sleep_disorder;
              }
              resultMessage += `<br><br>Heart Disease Risk: <span class="${
                data.risk === "High Risk" ? "severe-issue" : "no-issue"
              }">${data.risk}</span>`;

              const resultElement = document.getElementById("result");
              resultElement.innerHTML = resultMessage;

              // Apply styling based on the result
              resultElement.className = ""; // Clear previous classes
              resultElement.classList.add(resultClass);

              // Highlight the result with animation
              resultElement.style.backgroundColor = "rgba(255, 255, 255, 0.3)";
              resultElement.style.padding = "20px";
            })
            .catch((error) => {
              document.getElementById("result").innerText =
                "Error: Could not process your request. Please try again.";
              console.error("Error:", error);
            });
        });
    </script>
  </body>
</html>
